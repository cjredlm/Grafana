********************* Loki Promtail - Expresions ********************


*** Log Stream Selectors ***

Operators
= : equals
!= : not equals
=~ : regex matches
!~ : regex does not match


Return all log lines for the job varlog


{job="varlogs"}
Return all log lines for the filename /var/log/syslog


{filename="/var/log/syslog"}
Return all log lines for the job varlogs and the filename /var/log/auth.log


{filename="/var/log/auth.log",job="varlogs"}
Show all log lines for 2 jobs with different names


{filename=~"/var/log/auth.log|/var/log/syslog"}
Show everything you have using regex


{filename=~".+"}
Show data from all filenames, except for syslog


{filename=~".+",filename!="/var/log/syslog"}







*** Filter Expressions ***


Operators
Used for testing text within log line streams.


|= : equals
!= : not equals
|~ : regex matches
!~ : regex does not match
EXAMPLES
Return lines including the text "error"


{job="varlogs"} |= "error"
Return lines not including the text "error"


{job="varlogs"} != "error"
Return lines including the text "error" or "info" using regex


{job="varlogs"} |~ "error|info"
Return lines not including the text "error" or "info" using regex


{job="varlogs"} !~ "error|info"
Return lines including the text "error" but not including "info"


{job="varlogs"} |= "error" != "info"
Return lines including the text "Invalid user" and including ("bob" or "redis") using regex


{job="varlogs"} |~ "Invalid user (bob|redis)"
Return lines including the text "status 403" or "status 503" using regex


{job="varlogs"} |~ "status [45]03"


























